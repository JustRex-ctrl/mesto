(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._handler=r,this._elementsTemplate=n,this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like")}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._elementsTemplate).content.querySelector(".card").cloneNode(!0)}},{key:"_deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_clickLikeButton",value:function(){this._likeButton.classList.toggle("card__like_active")}},{key:"_setEventListeners",value:function(){var t=this;this._element.querySelector(".card__button-delete").addEventListener("click",(function(){t._deleteCard()})),this._likeButton.addEventListener("click",(function(){t._clickLikeButton()})),this._cardImage.addEventListener("click",(function(){t._handler(t._link,t._name)}))}},{key:"_generateCard",value:function(){this._cardImage=this._element.querySelector(".card__place-image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._element.querySelector(".card__name-place").textContent=this._name}},{key:"getView",value:function(){return this._generateCard(),this._setEventListeners(),this._element}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formConfog=e,this._formElement=n,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._activeButtonClass=e.activeButtonClass,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.add(this._errorClass),e.textContent=t.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._errorClass),e.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.remove(this._activeButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.add(this._activeButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var t=this;this.toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",activeButtonClass:"popup__button_valid"},l={profileName:".profile__name-title",profileJob:".profile__activity"};function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var s=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"rendererItems",value:function(){var t=this;this._initialArray.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===p(e)?e:String(e)}var m=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&i.close()},(r=y(r="_closePopupButtonEsc"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e),this._popupClosingButtons=this._popup.querySelector(".popup__close")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._closePopupButtonEsc)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._closePopupButtonEsc)}},{key:"setEventListeners",value:function(){var t=this;this._popupClosingButtons.addEventListener("click",(function(){return t.close()})),this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.close()}))}}])&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},d.apply(this,arguments)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(o){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=e.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=r,n._form=document.querySelector(t),n._inputList=n._form.querySelectorAll(".popup__input"),n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.id]=e.value})),this._formValues}},{key:"close",value:function(){d(h(u.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var t=this;d(h(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues()),t.close()}))}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}var w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=l.profileName,n=l.profileJob;this._userName=document.querySelector(e),this._userJob=document.querySelector(n)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,job:this._userJob.textContent}}},{key:"setUserInfo",value:function(t){var e=t.username,n=t.job;this._userName.textContent=e,this._userJob.textContent=n}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(r);if(o){var n=C(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popup=document.querySelector(t),e._link=e._popup.querySelector(".popup__image-place"),e._name=e._popup.querySelector(".popup__title-image"),e}return e=u,(n=[{key:"open",value:function(t,e){this._link.src=t,this._link.alt=e,this._name.textContent=e,P(C(u.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){P(C(u.prototype),"setEventListeners",this).call(this)}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(m),B=document.querySelector(".profile__edit-button"),q=(document.querySelector(".profile__activity"),document.querySelector(".popup__input_name")),I=document.querySelector(".popup__input_job"),T=document.querySelector(".popup__add"),x=document.querySelector(".popup__edit"),R=document.querySelector(".profile__add-button"),V=new L(".popup_type_image-open");V.setEventListeners();var N=function(t){var e=t.name,r=t.link,o=V.open.bind(V);return new n({name:e,link:r},"#card-template",o).getView()},A=new s({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(t){A.addItem(N({name:t.name,link:t.link}))}},".elements");A.rendererItems();var D=new S(".popup_type_add",{handleFormSubmit:function(t){var e=t.place,n=t.link,r=N({name:e,link:n});A.addItem(r)}});D.setEventListeners();var F=new w,J=new S(".popup_type_edit",{handleFormSubmit:function(t){F.setUserInfo(t)}});J.setEventListeners(),new i(u,x).enableValidation();var U=new i(u,T);U.enableValidation(),B.addEventListener("click",(function(){var t=F.getUserInfo(),e=t.name,n=t.job;q.value=e,I.value=n,J.open()})),R.addEventListener("click",(function(){D.open(),U.toggleButtonState()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTBCakJnSSxFQUFXRSxnQkFFWCxJQUFNQyxFQUFtQixJQUFJeEMsRUFsRVosa0JBbUViLENBQUVJLGlCQUFrQixTQUFBekIsR0FBa0IsSUFBaEI4RCxFQUFLOUQsRUFBTDhELE1BQU1wSSxFQUFJc0UsRUFBSnRFLEtBQ2xCcUksRUFBV1YsRUFBVyxDQUFDN0gsS0FBTXNJLEVBQU9wSSxLQUFNQSxJQUNoRGdJLEVBQVdDLFFBQVFJLEVBQ3ZCLElBSUZGLEVBQWlCVCxvQkFFakIsSUFBTVksRUFBVyxJQUFJMUIsRUFFZjJCLEVBQXVCLElBQUk1QyxFQTFFYixtQkEyRWxCLENBQUVJLGlCQUFrQixTQUFDaUIsR0FDakJzQixFQUFTRSxZQUFZeEIsRUFDekIsSUFDQXVCLEVBQXFCYixvQkFHSyxJQUFJakcsRUFBY3dDLEVBQWtCc0QsR0FDNUNrQixtQkFFdEIsSUFBTUMsRUFBb0IsSUFBSWpILEVBQWN3QyxFQUFrQnFELEdBQzlEb0IsRUFBa0JELG1CQUdsQnRCLEVBQWNuRyxpQkFBaUIsU0FBUyxXQUN0QyxJQUFBMkgsRUFBb0JMLEVBQVNNLGNBQXRCOUksRUFBSTZJLEVBQUo3SSxLQUFNaUgsRUFBRzRCLEVBQUg1QixJQUNYSyxFQUFVNUcsTUFBUVYsRUFDbEJ1SCxFQUFTN0csTUFBUXVHLEVBQ25Cd0IsRUFBcUJWLE1BQ3ZCLElBR0FMLEVBQWlCeEcsaUJBQWlCLFNBQVMsV0FDekNtSCxFQUFpQk4sT0FDakJhLEVBQWtCNUUsbUJBQ3BCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRWxlbWVudCwgZWxlbWVudHNUZW1wbGF0ZSwgaGFuZGxlcil7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmRFbGVtZW50Lm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmRFbGVtZW50Lmxpbms7XG4gICAgdGhpcy5faGFuZGxlciA9IGhhbmRsZXJcbiAgICB0aGlzLl9lbGVtZW50c1RlbXBsYXRlID0gZWxlbWVudHNUZW1wbGF0ZTtcblxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZWxlbWVudHNUZW1wbGF0ZSlcbiAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9jbGlja0xpa2VCdXR0b24oKSB7XG4gICAgLy90aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2J1dHRvbi1kZWxldGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4ge3RoaXMuX2RlbGV0ZUNhcmQoKX0pO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7dGhpcy5fY2xpY2tMaWtlQnV0dG9uKCl9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IHt0aGlzLl9oYW5kbGVyKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO30pO1xuICB9XG5cbiAgX2dlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fcGxhY2UtaW1hZ2UnKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX25hbWUtcGxhY2UnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuXG5cbiAgICB0aGlzLl9nZW5lcmF0ZUNhcmQoKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtQ29uZmlnLCBmb3JtRWxlbWVudCl7XG4gICAgdGhpcy5fZm9ybUNvbmZvZyA9IGZvcm1Db25maWc7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcblxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1Db25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBmb3JtQ29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBmb3JtQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBmb3JtQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gZm9ybUNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGZvcm1Db25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9hY3RpdmVCdXR0b25DbGFzcyA9IGZvcm1Db25maWcuYWN0aXZlQnV0dG9uQ2xhc3NcblxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG5cbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH07XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcblxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG5cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG59O1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvL9C+0LHRitC10LrRgiDQstCw0LvQuNC00LDRhtC40LhcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcbiAgYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX3ZhbGlkJyxcbn07XG5cbmV4cG9ydCBjb25zdCB1c2VySW5mb0RhdGEgPSB7XG4gIHByb2ZpbGVOYW1lOiAnLnByb2ZpbGVfX25hbWUtdGl0bGUnLFxuICBwcm9maWxlSm9iOiAnLnByb2ZpbGVfX2FjdGl2aXR5J1xufTtcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKXtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIC8vdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJlckl0ZW1zKCl7XG4gICAgdGhpcy5faW5pdGlhbEFycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgLy9wb3B1cCDRgdC10LvQtdC60YLQvtGAXG4gICAgdGhpcy5fcG9wdXBDbG9zaW5nQnV0dG9ucyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKTtcblxuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fY2xvc2VQb3B1cEJ1dHRvbkVzYyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9jbG9zZVBvcHVwQnV0dG9uRXNjKVxuICB9XG5cbiAgX2Nsb3NlUG9wdXBCdXR0b25Fc2MgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZGVidWdnZXJcbiAgICB0aGlzLl9wb3B1cENsb3NpbmdCdXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwLmpzJztcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHtoYW5kbGVGb3JtU3VibWl0fSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCl7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcblxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5pZF0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgfVxufVxuIiwiaW1wb3J0IHt1c2VySW5mb0RhdGF9IGZyb20gJy4vY29uc3RhbnRzLmpzJ1xuXG5leHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zdCB7cHJvZmlsZU5hbWUsIHByb2ZpbGVKb2J9ID0gdXNlckluZm9EYXRhO1xuXG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lKTtcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBqb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQsXG4gICAgfVxuICAgIHJldHVybiB1c2VyRGF0YTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKXtcbiAgICBjb25zdCB7dXNlcm5hbWUsIGpvYn0gPSB1c2VyRGF0YTtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJuYW1lO1xuICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwLmpzJztcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpXG4gICAgdGhpcy5fbGluayA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UtcGxhY2UnKTtcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX190aXRsZS1pbWFnZScpO1xuICB9XG5cbiAgb3BlbihsaW5rLCBuYW1lKSB7XG4gICAgdGhpcy5fbGluay5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2xpbmsuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcblxuICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XG5pbXBvcnQge0NhcmR9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQge0Zvcm1WYWxpZGF0b3J9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcydcbmltcG9ydCB7dmFsaWRhdGlvbkNvbmZpZ30gZnJvbSAnLi4vY29tcG9uZW50cy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IHtQb3B1cFdpdGhGb3JtfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IHtVc2VySW5mb30gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQge1BvcHVwV2l0aEltYWdlfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlJztcblxuY29uc3QgcHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgcG9wdXBBZGQgPSAnLnBvcHVwX3R5cGVfYWRkJztcbmNvbnN0IHByb2ZpbGVBY3Rpdml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hY3Rpdml0eScpO1xuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9uYW1lJyk7XG5jb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfam9iJyk7XG5jb25zdCBwb3B1cFR5cGVFZGl0ID0gJy5wb3B1cF90eXBlX2VkaXQnO1xuY29uc3QgcG9wdXBBZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19hZGQnKTtcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19lZGl0Jyk7XG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmNvbnN0IHBvcHVwT3BlbkltYWdlID0gJy5wb3B1cF90eXBlX2ltYWdlLW9wZW4nO1xuXG4vL9Cc0LDRgdC40LIg0LrQsNGA0YLQvtGH0LXQulxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gIH1cbl07XG5cbmNvbnN0IGVsZW1lbnRzID0gJy5lbGVtZW50cyc7XG5cblxuXG5cbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwT3BlbkltYWdlKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vL9GE0YPQvdC60YbQuNGPINGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQtNC70Y8g0YTQvtGA0LxcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoaXRlbSkgPT4ge1xuICBjb25zdCB7bmFtZSxsaW5rIH0gPSBpdGVtXG4gIGNvbnN0IHBvcHVwSGFuZGxlciA9IHBvcHVwV2l0aEltYWdlLm9wZW4uYmluZChwb3B1cFdpdGhJbWFnZSk7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7bmFtZSxsaW5rfSwgJyNjYXJkLXRlbXBsYXRlJywgcG9wdXBIYW5kbGVyKTtcblxuICAgIGNvbnN0IGNhcmRWaWV3ID0gY2FyZC5nZXRWaWV3KCk7XG4gICAgcmV0dXJuIGNhcmRWaWV3O1xufTtcbi8vXG5cbmNvbnN0IGltYWdlc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGltYWdlc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKHtuYW1lOiBpdGVtLm5hbWUsIGxpbms6IGl0ZW0ubGlua30pKTtcbiAgfVxufSwgZWxlbWVudHNcbik7XG5cbmltYWdlc0xpc3QucmVuZGVyZXJJdGVtcygpO1xuXG5jb25zdCBwb3B1cEFkZFVzZXJGb3RvID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGQsXG4gICAgeyBoYW5kbGVGb3JtU3VibWl0OiAoe3BsYWNlLGxpbmt9KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0ltYWdlID0gY3JlYXRlQ2FyZCh7bmFtZTogcGxhY2UsIGxpbms6IGxpbmt9KTtcbiAgICAgICAgaW1hZ2VzTGlzdC5hZGRJdGVtKG5ld0ltYWdlKTtcbiAgICB9XG4gICAgfVxuICApO1xuICBkZWJ1Z2dlclxuICBwb3B1cEFkZFVzZXJGb3RvLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oKTtcblxuICBjb25zdCBwb3B1cEVkaXRVc2VyUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwVHlwZUVkaXQsXG4gICAgeyBoYW5kbGVGb3JtU3VibWl0OiAodXNlckRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIH19KTtcbiAgICBwb3B1cEVkaXRVc2VyUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9Cy0LDQu9C40LTQsNGG0LjRj1xuY29uc3QgZm9ybVByb2ZpbGVWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcHJvZmlsZUZvcm0pO1xuZm9ybVByb2ZpbGVWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEFkZEZvcm0pO1xuYWRkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5cbnByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHtuYW1lLCBqb2J9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICAgIGpvYklucHV0LnZhbHVlID0gam9iO1xuICBwb3B1cEVkaXRVc2VyUHJvZmlsZS5vcGVuKCk7XG59KTtcblxuLy9hZGQgZm9ybVxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIHBvcHVwQWRkVXNlckZvdG8ub3BlbigpO1xuICBhZGRGb3JtVmFsaWRhdGlvbi50b2dnbGVCdXR0b25TdGF0ZSgpO1xufSk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNhcmRFbGVtZW50IiwiZWxlbWVudHNUZW1wbGF0ZSIsImhhbmRsZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZXIiLCJfZWxlbWVudHNUZW1wbGF0ZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2xpa2VCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlQ2FyZCIsIl9jbGlja0xpa2VCdXR0b24iLCJfY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfZ2VuZXJhdGVDYXJkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImZvcm1Db25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtQ29uZm9nIiwiX2Zvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9hY3RpdmVCdXR0b25DbGFzcyIsImFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGF0aW9uQ29uZmlnIiwidXNlckluZm9EYXRhIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaW5pdGlhbEFycmF5IiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImNsb3NlIiwiX3BvcHVwIiwiX3BvcHVwQ2xvc2luZ0J1dHRvbnMiLCJfY2xvc2VQb3B1cEJ1dHRvbkVzYyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfdGhpczIiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJoYW5kbGVGb3JtU3VibWl0IiwiY2FsbCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInJlc2V0IiwiX3RoaXMzIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwiam9iIiwidXNlckRhdGEiLCJ1c2VybmFtZSIsIlBvcHVwV2l0aEltYWdlIiwicHJvZmlsZUJ1dHRvbiIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicG9wdXBBZGRGb3JtIiwicHJvZmlsZUZvcm0iLCJwcm9maWxlQWRkQnV0dG9uIiwicG9wdXBXaXRoSW1hZ2UiLCJzZXRFdmVudExpc3RlbmVycyIsImNyZWF0ZUNhcmQiLCJwb3B1cEhhbmRsZXIiLCJvcGVuIiwiYmluZCIsImdldFZpZXciLCJpbWFnZXNMaXN0IiwiYWRkSXRlbSIsInJlbmRlcmVySXRlbXMiLCJwb3B1cEFkZFVzZXJGb3RvIiwicGxhY2UiLCJuZXdJbWFnZSIsInVzZXJJbmZvIiwicG9wdXBFZGl0VXNlclByb2ZpbGUiLCJzZXRVc2VySW5mbyIsImVuYWJsZVZhbGlkYXRpb24iLCJhZGRGb3JtVmFsaWRhdGlvbiIsIl91c2VySW5mbyRnZXRVc2VySW5mbyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==